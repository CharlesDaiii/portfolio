import{r as e,j as s}from"./jsx-runtime-Lfnj0zCF.js";import{c as E,a as D,u as H,B as q,I as A,n as P}from"./heading-DBM6cEeA.js";import{u as G}from"./theme-provider-CGEkIZw1.js";import{u as J}from"./useInViewport-DazAZXCp.js";import{r as K}from"./image-BvwpLhe9.js";function Q(){const[t,a]=e.useState(!1);return e.useEffect(()=>{a(!0)},[]),t}const U="_image_4szht_2",X="_elementWrapper_4szht_49",Y="_placeholder_4szht_71",Z="_element_4szht_49",$="_button_4szht_104",l={image:U,elementWrapper:X,placeholder:Y,element:Z,button:$},ne=({className:t,style:a,reveal:o,delay:r=0,raised:I,src:g,srcSet:c,placeholder:y,...u})=>{const[d,R]=e.useState(!1),{theme:i}=G(),m=e.useRef(),f=g||c.split(" ")[0],v=J(m,!W(f)),p=e.useCallback(()=>{R(!0)},[]);return s.jsx("div",{className:D(l.image,t),"data-visible":v||d,"data-reveal":o,"data-raised":I,"data-theme":i,style:E({delay:P(r)},a),ref:m,children:s.jsx(O,{delay:r,onLoad:p,loaded:d,inViewport:v,reveal:o,src:f,srcSet:c,placeholder:y,...u})})},O=({onLoad:t,loaded:a,inViewport:o,srcSet:r,placeholder:I,delay:g,src:c,alt:y,play:u=!0,restartOnPause:d,reveal:R,sizes:i,width:m,height:f,noPauseButton:v,cover:p,...V})=>{const _=H(),[F,k]=e.useState(!0),[M,x]=e.useState(!_),[b,N]=e.useState(),[z,B]=e.useState(!1),C=e.useRef(),n=e.useRef(),h=W(c),T=o,L=Q();e.useEffect(()=>{h&&r?(async()=>{const j=await K({srcSet:r,sizes:i});N(j)})():h&&N(c)},[h,i,c,r]),e.useEffect(()=>{if(!n.current||!b)return;const S=()=>{x(!0),n.current.play()},j=()=>{x(!1),n.current.pause()};u||(j(),d&&(n.current.currentTime=0)),!z&&(o?o&&!_&&u&&S():j())},[o,u,_,d,z,b]);const w=S=>{S.preventDefault(),B(!0),n.current.paused?(x(!0),n.current.play()):(x(!1),n.current.pause())};return s.jsxs("div",{className:l.elementWrapper,"data-reveal":R,"data-visible":o||a,style:E({delay:P(g+1e3)}),children:[h&&L&&s.jsxs(e.Fragment,{children:[s.jsx("video",{muted:!0,loop:!0,playsInline:!0,className:l.element,"data-loaded":a,"data-cover":p,autoPlay:!_,onLoadStart:t,src:b,"aria-label":y,ref:n,...V}),!v&&s.jsxs(q,{className:l.button,onClick:w,children:[s.jsx(A,{icon:M?"pause":"play"}),M?"Pause":"Play"]})]}),!h&&s.jsx("img",{className:l.element,"data-loaded":a,"data-cover":p,onLoad:t,decoding:"async",src:T?c:void 0,srcSet:T?r:void 0,width:m,height:f,alt:y,sizes:i,...V}),F&&s.jsx("img",{"aria-hidden":!0,className:l.placeholder,"data-loaded":a,"data-cover":p,style:E({delay:P(g)}),ref:C,src:I,width:m,height:f,onTransitionEnd:()=>k(!1),decoding:"async",loading:"lazy",alt:"",role:"presentation"})]})};function W(t){return typeof t=="string"&&t.includes(".mp4")}export{ne as I};
